"use strict";angular.module("app.configs",[]).config(["$urlRouterProvider",function(a){a.otherwise("/")}]).config(["CardPairsProvider",function(a){a.numPairs=6}]),angular.module("app",["ui.router","app.Table","app.Deck","app.configs"]),function(a){var b=function(a){var b=this;b.cardPairs=a};b.$inject=["CardPairs"];var c=a.module("app.Table",[]);c.controller("TableCtrl",b),c.config(["$stateProvider",function(a){a.state("table",{url:"/",templateUrl:"table/table.html",controller:b,controllerAs:"ctrl"})}])}(angular),function(a){var b=a.module("app.Table");b.directive("card",function(){return{replace:!0,templateUrl:"table/card.html",scope:{pairs:"=",card:"="},link:function(a,b){b.on("click",function(){a.pairs.flipCard(a.card),a.$apply()});var c=a.$watch("card.locked",function(a){a&&(b.off("click"),c())})}}})}(angular),function(a){var b=a.module("app.Deck",[]);b.provider("CardPairs",function(){this.$get=["Pairs",function(a){return new a(this.numPairs)}]})}(angular),function(a){function b(a){for(var b,c=a.concat(),d=c.length;--d;)b=Math.floor(d*Math.random()),c[d]=[c[b],c[b]=c[d]][0];return c}var c=a.module("app.Deck");c.factory("Pairs",["Card","$timeout",function(a,c){var d=function(a){this.cards=this.randomPairs(a),this._isFinished=!1};return d.prototype.availableIcons=function(){return["star-o","star","circle-o","circle","minus-circle","plus-circle","question-circle","info-circle","times-circle","times-circle-o"]},d.prototype.randomPairs=function(c){for(var d=this.availableIcons(),e=[];e.length<2*c;){var f=Math.floor(d.length*Math.random());e.push(new a(d[f])),e.push(new a(d[f]))}return e=b(e),this.cards=e},d.prototype.alreadyFlipped=function(){return this.cards.filter(function(a){return!a.locked&&a.flipped})},d.prototype.flipCard=function(a){var b=this.alreadyFlipped();if(!(b.length>1)){var d=b[0];if(a.flip(),d){if(d.icon==a.icon)return a.lock(),d.lock(),void(this._isFinished=0===this.cards.filter(function(a){return!a.locked}).length);c(function(){a.flip(!1),d.flip(!1)},500)}}},d.prototype.isFinished=function(){return this._isFinished},d}])}(angular),function(a){var b=a.module("app.Deck");b.factory("Card",function(){var b=0,c=function(a){this.id=++b,this.icon="fa-"+a,this.flipped=!1,this.locked=!1};return c.prototype.flip=function(b){!a.isUndefined(b)||(b=!this.flipped),this.flipped=b},c.prototype.lock=function(){this.locked=!0},c})}(angular);